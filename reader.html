<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>硝子の箱 - Reader</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="reader-body">
    <!-- 背景画像レイヤー -->
    <div id="bg-image" class="bg-layer"></div>
    
    <!-- 演出用オーバーレイ -->
    <div id="visual-overlay"></div>
    
    <!-- 演出用オーディオ -->
    <audio id="effect-bgm" loop></audio>
    <audio id="effect-se"></audio>
    
    <div class="reader-container">
        <nav class="reader-nav">
            <a href="index.html#title" class="nav-btn">
                <span>← トップへ</span>
            </a>
            <div class="progress-info">
                <span id="scroll-progress">0%</span>
                <progress id="scroll-progress-bar" value="0" max="100" title="読書進捗"></progress>
                <button id="bg-view-btn" class="bg-view-btn" title="背景画像のみを表示" style="display:flex; align-items:center; justify-content:center; padding: 0.3rem; margin-left: 0.5rem; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; cursor: pointer;">
                    <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20" fill="#e0e0e0" class="icon-image"><path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm40-80h480L570-480 450-320l-90-120-120 160Zm-40 80v-560 560Z"/></svg>
                    <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20" fill="#e0e0e0" class="icon-close" style="display:none;"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
                </button>
            </div>
        </nav>
        
        <main class="reader-content" id="content">
            <div class="loading">読み込み中...</div>
        </main>
        
        <div class="reader-controls">
            <button id="prev-section" class="control-btn" disabled title="前のページに戻る">
                <span>← 前のセクション</span>
            </button>
            <button id="next-section" class="control-btn" disabled title="戻る前のページに進む">
                <span>次のセクション →</span>
            </button>
        </div>
        
        <div class="bottom-controls">
            <div class="volume-control">
                <label for="volume" title="音量調整" style="display:flex; align-items:center; cursor:pointer;">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#e0e0e0"><path d="M560-131v-82q90-26 145-100t55-168q0-94-55-168T560-749v-82q124 28 202 125.5T840-481q0 127-78 224.5T560-131ZM120-360v-240h160l200-200v640L280-360H120Zm440 40v-322q47 22 73.5 66t26.5 96q0 51-26.5 94.5T560-320Z"/></svg>
                </label>
                <input type="range" id="volume" min="0" max="100" value="30" step="5" title="音量を調整">
            </div>

            <div class="bg-opacity-control">
                <label for="bg-opacity" title="背景画像の明るさを調整" style="display:flex; align-items:center; cursor:pointer;">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#e0e0e0"><path d="M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q62-128 182-209.5T480-790q146 0 266 81.5T920-500q-62 128-182 209.5T480-200Z"/></svg>
                </label>
                <input type="range" id="bg-opacity" min="0" max="100" value="50" step="5" title="背景画像の見やすさを調整（100で背景のみ表示）">
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/reader.js"></script>
</body>
</html>
